#pragma checksum "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "0394a5ab3cb6ed1e9741d4922c08ca7f7e32d5d4"
// <auto-generated/>
#pragma warning disable 1591
namespace RenewalTML.Pages.Client
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
#nullable restore
#line 1 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Designing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Navigation;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Notifications;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Transactions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Validation;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Clients;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Admin;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Exstention.ClassAddons;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Shared.Exstention;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Data.Model;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Pages.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Blazorise;

#line default
#line hidden
#nullable disable
#nullable restore
#line 25 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Data.Dto;

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using RenewalTML.Data.JSInteropHelper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Newtonsoft.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Microsoft.AspNetCore.SignalR.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 29 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Blazorise.Utilities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using Microsoft.AspNetCore.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 31 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using System.Threading.Tasks;

#line default
#line hidden
#nullable disable
#nullable restore
#line 32 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using System.ComponentModel.DataAnnotations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 33 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using System.Linq.Expressions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 34 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\_Imports.razor"
using System.Reflection;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
using RenewalTML.Data.Dto.Admin;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/profile/{userId:int}/actions")]
    public partial class Action : RenewalTMLComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "block p-normal -js-page-maxheight-relaod");
            __builder.AddAttribute(2, "style", 
#nullable restore
#line 15 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                               _isComplete ? "max-height:900px; display: flex; " : "max-height:90px;"

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 16 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
     if (_isComplete)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "style", "display: flex; gap: 15px; width: 100%;");
            __builder.OpenElement(5, "div");
            __builder.AddAttribute(6, "class", "action-left-menu");
            __builder.OpenElement(7, "a");
            __builder.AddAttribute(8, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 29 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                             () => ActionHub(ActionList.Skip(0).Take(1).First())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(9, "class", "-tp-transfer-money" + " " + (
#nullable restore
#line 29 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                              CurrentAction == ActionList.Skip(0).Take(1).First() ? "active" : ""

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(10, "<i class=\"fal fa-exchange-alt\"></i>");
            __builder.CloseElement();
            __builder.AddMarkupContent(11, "\r\n                ");
            __builder.OpenElement(12, "a");
            __builder.AddAttribute(13, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 30 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                             () => ActionHub(ActionList.Skip(1).Take(1).First())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(14, "class", "-tp-request-money" + " " + (
#nullable restore
#line 30 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                             CurrentAction == ActionList.Skip(1).Take(1).First() ? "active" : ""

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(15, "<i class=\"fal fa-wallet\"></i>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(16, "\r\n            ");
            __builder.OpenElement(17, "div");
#nullable restore
#line 33 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                 if (CurrentAction == "transferMoney")
                {
                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 35 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                     if (!isEconomicBlocked || user.Level >= 2)
                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(18, "<p class=\"auth-name\">Перевод с счёта на счёт</p>");
#nullable restore
#line 38 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                         if (TransferMoneyInformation != null && TransferMoneyInformation.isShow)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(19, "div");
            __builder.AddAttribute(20, "style", "margin: 0 35px 0 35px; margin-top:10px");
            __builder.OpenComponent<RenewalTML.Shared.Validation.ValidationBlock>(21);
            __builder.AddAttribute(22, "block", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<RenewalTML.Data.Dto.ValidationMessageBlock>(
#nullable restore
#line 41 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                        TransferMoneyInformation

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
#nullable restore
#line 43 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 45 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                         if (TransferMoneyError != null && TransferMoneyError.isShow)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(23, "div");
            __builder.AddAttribute(24, "style", "margin: 0 35px 0 35px; margin-top:10px");
            __builder.OpenComponent<RenewalTML.Shared.Validation.ValidationBlock>(25);
            __builder.AddAttribute(26, "block", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<RenewalTML.Data.Dto.ValidationMessageBlock>(
#nullable restore
#line 48 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                        TransferMoneyError

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
#nullable restore
#line 50 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(27, "div");
            __builder.AddAttribute(28, "class", "user-form-factor-action-panel");
            __builder.OpenComponent<Blazorise.Validations>(29);
            __builder.AddAttribute(30, "Model", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#nullable restore
#line 53 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                            _sendMoneyModule._model

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(31, "Mode", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Blazorise.ValidationMode>(
#nullable restore
#line 53 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                                           ValidationMode.Auto

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(32, "ValidateOnLoad", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 53 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                                                                                false

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(33, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<Blazorise.Validation>(34);
                __builder2.AddAttribute(35, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(36, "<p class=\"form-note req\">Получатель перевода:</p>\r\n                                    ");
                    __builder3.OpenComponent<RenewalTML.Shared.Forms.UserAutoComplete>(37);
                    __builder3.AddAttribute(38, "Field", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(
#nullable restore
#line 56 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                           (() => _sendMoneyModule._model.UserName)

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(39, "Placeholder", "Введие пользователя");
                    __builder3.AddAttribute(40, "Text", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 56 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                  _sendMoneyModule._model.UserName

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(41, "TextChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => _sendMoneyModule._model.UserName = __value, _sendMoneyModule._model.UserName))));
                    __builder3.AddAttribute(42, "Feedback", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.OpenComponent<Blazorise.ValidationError>(43);
                        __builder4.CloseComponent();
                    }
                    ));
                    __builder3.CloseComponent();
                }
                ));
                __builder2.AddComponentReferenceCapture(44, (__value) => {
#nullable restore
#line 54 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                   _sendMoneyModule._fieldValidationStatus["UserName"] = (Blazorise.Validation)__value;

#line default
#line hidden
#nullable disable
                }
                );
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(45, "\r\n                                ");
                __builder2.OpenComponent<Blazorise.Validation>(46);
                __builder2.AddAttribute(47, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(48, "<p class=\"form-note req\">Количество:</p>\r\n                                    ");
                    __builder3.OpenComponent<Blazorise.NumericEdit<int>>(49);
                    __builder3.AddAttribute(50, "Placeholder", "Введите количество");
                    __builder3.AddAttribute(51, "Value", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<int>(
#nullable restore
#line 64 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                              _sendMoneyModule._model.Money

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(52, "ValueChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<int>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<int>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => _sendMoneyModule._model.Money = __value, _sendMoneyModule._model.Money))));
                    __builder3.AddAttribute(53, "ValueExpression", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<int>>>(() => _sendMoneyModule._model.Money));
                    __builder3.AddAttribute(54, "Feedback", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.OpenComponent<Blazorise.ValidationError>(55);
                        __builder4.CloseComponent();
                    }
                    ));
                    __builder3.CloseComponent();
                }
                ));
                __builder2.AddComponentReferenceCapture(56, (__value) => {
#nullable restore
#line 62 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                   _sendMoneyModule._fieldValidationStatus["Money"] = (Blazorise.Validation)__value;

#line default
#line hidden
#nullable disable
                }
                );
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(57, "\r\n                                ");
                __builder2.OpenComponent<Blazorise.Check<bool>>(58);
                __builder2.AddAttribute(59, "Checked", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<bool>(
#nullable restore
#line 70 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                      _sendMoneyModule._model.AddTexes

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(60, "CheckedChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<bool>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<bool>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => _sendMoneyModule._model.AddTexes = __value, _sendMoneyModule._model.AddTexes))));
                __builder2.AddAttribute(61, "CheckedExpression", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<bool>>>(() => _sendMoneyModule._model.AddTexes));
                __builder2.AddAttribute(62, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(63, "Включить налог в сумму?");
                }
                ));
                __builder2.CloseComponent();
#nullable restore
#line 72 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                  
                                    if (_sendMoneyModule._model.AddTexes) // налог включен в вашу сумму
                                    {
                                        _sendMoneyModule._model.SpendMoney = _sendMoneyModule._model.Money;
                                        _sendMoneyModule._model.TransMoney = _sendMoneyModule._model.SpendMoney;
                                        _sendMoneyModule._model.SpendMoney += (int)((_sendMoneyModule._model.SpendMoney / 100) * _sendMoneyModule._model.Tax);
                                    }
                                    else
                                    {
                                        _sendMoneyModule._model.SpendMoney = _sendMoneyModule._model.Money;
                                        _sendMoneyModule._model.TransMoney = _sendMoneyModule._model.SpendMoney - (int)((_sendMoneyModule._model.SpendMoney / 100) * _sendMoneyModule._model.Tax);
                                    }
                                

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(64, "ul");
                __builder2.AddAttribute(65, "style", "color: #333; font-weight: 500; margin-left: 25px; font-size: 13px;");
                __builder2.OpenElement(66, "li");
                __builder2.AddMarkupContent(67, "С вашего счёта будет снято: ");
                __builder2.OpenElement(68, "bold");
#nullable restore
#line 87 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
__builder2.AddContent(69, _sendMoneyModule._model.SpendMoney);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.AddContent(70, " ");
                __builder2.OpenComponent<RenewalTML.Shared.Designing.MoneyLogotype>(71);
                __builder2.AddAttribute(72, "Class", "mini black-grey");
                __builder2.CloseComponent();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(73, "\r\n                                    ");
                __builder2.OpenElement(74, "li");
                __builder2.AddMarkupContent(75, "Пользователь получит: ");
                __builder2.OpenElement(76, "bold");
#nullable restore
#line 88 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
__builder2.AddContent(77, _sendMoneyModule._model.TransMoney);

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.AddContent(78, " ");
                __builder2.OpenComponent<RenewalTML.Shared.Designing.MoneyLogotype>(79);
                __builder2.AddAttribute(80, "Class", "mini black-grey");
                __builder2.CloseComponent();
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(81, "\r\n\r\n                                ");
                __builder2.OpenElement(82, "div");
                __builder2.AddAttribute(83, "class", "align-center button-checkbox-panel");
                __builder2.AddAttribute(84, "style", "margin-bottom: 25px;");
                __builder2.OpenComponent<Blazorise.Button>(85);
                __builder2.AddAttribute(86, "Type", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Blazorise.ButtonType>(
#nullable restore
#line 92 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                  ButtonType.Submit

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(87, "Class", "primary normal icon");
                __builder2.AddAttribute(88, "Loading", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 92 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                           transferLoader

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(89, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 92 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                                                     async () => await StartTransfer()

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(90, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(91, "Перевести<i class=\"fal fa-forward\"></i>");
                }
                ));
                __builder2.AddAttribute(92, "LoadingTemplate", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(93, "<div class=\"btn-loader\"></div>");
                }
                ));
                __builder2.CloseComponent();
                __builder2.CloseElement();
            }
            ));
            __builder.AddComponentReferenceCapture(94, (__value) => {
#nullable restore
#line 53 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                               _sendMoneyModule._validationContext = (Blazorise.Validations)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.CloseElement();
#nullable restore
#line 99 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                    }
                    else
                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(95, "<div class=\"loading-template-auth\" style=\"display: flex; padding: 60px;\"><i class=\"fas fa-user-lock\"></i>\r\n                            <p class=\"main-text\">Нет доступа</p><p class=\"mini-text\">Вам заблокирован доступ к этому действию.</p></div>");
#nullable restore
#line 106 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 106 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                     
                }
                else if (CurrentAction == "requestMoney")
                {
                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 110 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                     if (!isEconomicBlocked || user.Level >= 2)
                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(96, "<p class=\"auth-name\">Пополнить счёт</p>");
#nullable restore
#line 114 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                         if (RequestMoneyInformation != null && RequestMoneyInformation.isShow)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(97, "div");
            __builder.AddAttribute(98, "style", "margin: 0 35px 0 35px; margin-top:10px");
            __builder.OpenComponent<RenewalTML.Shared.Validation.ValidationBlock>(99);
            __builder.AddAttribute(100, "block", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<RenewalTML.Data.Dto.ValidationMessageBlock>(
#nullable restore
#line 117 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                        RequestMoneyInformation

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
#nullable restore
#line 119 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 121 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                         if (RequestMoneyError != null && RequestMoneyError.isShow)
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(101, "div");
            __builder.AddAttribute(102, "style", "margin: 0 35px 0 35px; margin-top:10px");
            __builder.OpenComponent<RenewalTML.Shared.Validation.ValidationBlock>(103);
            __builder.AddAttribute(104, "block", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<RenewalTML.Data.Dto.ValidationMessageBlock>(
#nullable restore
#line 124 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                        RequestMoneyError

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
#nullable restore
#line 126 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(105, "div");
            __builder.AddAttribute(106, "class", "user-form-factor-action-panel");
            __builder.OpenComponent<Blazorise.Validations>(107);
            __builder.AddAttribute(108, "Model", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#nullable restore
#line 129 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                   _requestMoneyModule._model

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(109, "Mode", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Blazorise.ValidationMode>(
#nullable restore
#line 129 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                                     ValidationMode.Auto

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(110, "ValidateOnLoad", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 129 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                                                                          false

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(111, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<Blazorise.Validation>(112);
                __builder2.AddAttribute(113, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(114, "<p class=\"form-note req\">Количество:</p>\r\n                        ");
                    __builder3.OpenComponent<Blazorise.NumericEdit<int>>(115);
                    __builder3.AddAttribute(116, "Placeholder", "Введите количество");
                    __builder3.AddAttribute(117, "Value", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<int>(
#nullable restore
#line 132 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                  _requestMoneyModule._model.Money

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(118, "ValueChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<int>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<int>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => _requestMoneyModule._model.Money = __value, _requestMoneyModule._model.Money))));
                    __builder3.AddAttribute(119, "ValueExpression", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<int>>>(() => _requestMoneyModule._model.Money));
                    __builder3.AddAttribute(120, "Feedback", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.OpenComponent<Blazorise.ValidationError>(121);
                        __builder4.CloseComponent();
                    }
                    ));
                    __builder3.CloseComponent();
                }
                ));
                __builder2.AddComponentReferenceCapture(122, (__value) => {
#nullable restore
#line 130 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                       _requestMoneyModule._fieldValidationStatus["Money"] = (Blazorise.Validation)__value;

#line default
#line hidden
#nullable disable
                }
                );
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(123, "\r\n                    ");
                __builder2.OpenComponent<Blazorise.Validation>(124);
                __builder2.AddAttribute(125, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(126, "<p class=\"form-note\">Информация:</p>\r\n                        ");
                    __builder3.OpenComponent<RenewalTML.Shared.Forms.MarkDownEditor>(127);
                    __builder3.AddAttribute(128, "EditorType", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 140 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                   (string)"requestMoney"

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(129, "Field", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(
#nullable restore
#line 140 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                                                   (() => _requestMoneyModule._model.Text )

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(130, "UniqName", "_cl_requestMoney");
                    __builder3.AddAttribute(131, "Text", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 140 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                    _requestMoneyModule._model.Text

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(132, "TextChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => _requestMoneyModule._model.Text = __value, _requestMoneyModule._model.Text))));
                    __builder3.AddAttribute(133, "Feedback", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.OpenComponent<Blazorise.ValidationError>(134);
                        __builder4.CloseComponent();
                    }
                    ));
                    __builder3.CloseComponent();
                }
                ));
                __builder2.AddComponentReferenceCapture(135, (__value) => {
#nullable restore
#line 138 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                       _requestMoneyModule._fieldValidationStatus["Text"] = (Blazorise.Validation)__value;

#line default
#line hidden
#nullable disable
                }
                );
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(136, "\r\n\r\n                    ");
                __builder2.OpenComponent<Blazorise.Validation>(137);
                __builder2.AddAttribute(138, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(139, "<p class=\"form-note\">Изоображения:</p>\r\n                        ");
                    __builder3.OpenComponent<RenewalTML.Shared.Forms.MultiImageForm>(140);
                    __builder3.AddAttribute(141, "MaxImagesCount", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32>(
#nullable restore
#line 149 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                                                                      6

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(142, "fillTicketImages", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<RenewalTML.Data.Dto.FillTicketImage>>(
#nullable restore
#line 149 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                          _requestMoneyModule._model.FillTicketImage

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(143, "fillTicketImagesChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Collections.Generic.List<RenewalTML.Data.Dto.FillTicketImage>>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Collections.Generic.List<RenewalTML.Data.Dto.FillTicketImage>>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => _requestMoneyModule._model.FillTicketImage = __value, _requestMoneyModule._model.FillTicketImage))));
                    __builder3.AddAttribute(144, "Feedback", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.OpenComponent<Blazorise.ValidationError>(145);
                        __builder4.CloseComponent();
                    }
                    ));
                    __builder3.AddComponentReferenceCapture(146, (__value) => {
#nullable restore
#line 149 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                              _refMultiImageForm = (RenewalTML.Shared.Forms.MultiImageForm)__value;

#line default
#line hidden
#nullable disable
                    }
                    );
                    __builder3.CloseComponent();
                }
                ));
                __builder2.AddComponentReferenceCapture(147, (__value) => {
#nullable restore
#line 147 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                       _requestMoneyModule._fieldValidationStatus["Text"] = (Blazorise.Validation)__value;

#line default
#line hidden
#nullable disable
                }
                );
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(148, "\r\n\r\n\r\n                    ");
                __builder2.OpenElement(149, "div");
                __builder2.AddAttribute(150, "class", "align-center button-checkbox-panel");
                __builder2.AddAttribute(151, "style", "margin-bottom: 25px;");
                __builder2.OpenComponent<Blazorise.Button>(152);
                __builder2.AddAttribute(153, "Class", "primary normal icon");
                __builder2.AddAttribute(154, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 158 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                      async () => await StartRequest()

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(155, "Loading", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 158 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                                                                                                  isStartRequestMoney

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(156, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(157, "Пополнить<i class=\"fal fa-forward\"></i>");
                }
                ));
                __builder2.AddAttribute(158, "LoadingTemplate", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(159, "<div class=\"btn-loader\"></div>");
                }
                ));
                __builder2.CloseComponent();
                __builder2.CloseElement();
            }
            ));
            __builder.AddComponentReferenceCapture(160, (__value) => {
#nullable restore
#line 129 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                                   _requestMoneyModule._validationContext = (Blazorise.Validations)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.CloseElement();
#nullable restore
#line 165 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                    }
                    else
                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(161, "<div class=\"loading-template-auth\" style=\"display: flex; padding: 60px;\"><i class=\"fas fa-user-lock\"></i>\r\n                            <p class=\"main-text\">Нет доступа</p><p class=\"mini-text\">Вам заблокирован доступ к этому действию.</p></div>");
#nullable restore
#line 172 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 172 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                     
                }
                else if (CurrentAction == "loading")
                {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(162, "<div class=\"loader-wrapper\"><div class=\"btn-loader page\"></div></div>");
#nullable restore
#line 177 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 180 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
    }
    else
    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(163, "<div class=\"loader-wrapper\"><div class=\"btn-loader page\"></div></div>");
#nullable restore
#line 184 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 188 "C:\Users\Fearp\source\repos\RenewalTML\RenewalTML\Pages\Client\Action.razor"
       
    [Parameter]
    public int UserId { get; set; }

    private Client user { get; set; }
    private Client viewer { get; set; }

    private string CurrentAction { get; set; }
    private bool isEconomicBlocked { get; set; }

    /* TRANSFER */

    private ContextValidationModule<SendMoneyUserToUser> _sendMoneyModule { get; set; }
    private ValidationMessageBlock TransferMoneyInformation { get; set; }
    private ValidationMessageBlock TransferMoneyError { get; set; }

    private bool transferLoader { get; set; }

    /* REQUEST MONEY */

    private ContextValidationModule<RequestMoneyModel> _requestMoneyModule { get; set; }
    private MultiImageForm _refMultiImageForm { get; set; }

    private ValidationMessageBlock RequestMoneyInformation { get; set; }
    private ValidationMessageBlock RequestMoneyError { get; set; }
    private bool isStartRequestMoney { get; set; }

    /* OTHER */

    private List<string> ActionList = new List<string>()
{
        "transferMoney",
        "requestMoney",
        "loading"
    };

    // TODO: Баг с загрузкой фоток в большом количества
    // TODO: Сделать отдельную страничку с вашими заявками.

    // request money

    private async Task StartRequest()
    {
        //var textRequest = await RefDataInformationRequest.GetData(false);

        if (isStartRequestMoney)
        {
            RequestMoneyError = new ValidationMessageBlock("Дождитесь окончания загрузки предидущего действия...", "error");
            await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");
            StateHasChanged();
            return;
        }

        if (_refMultiImageForm.isStartImageUpload)
        {
            RequestMoneyError = new ValidationMessageBlock("Дождитесь окончания загрузки изоображений.", "error");
            _requestMoneyModule.SetFieldStatus("FillTicketImage", ValidationStatus.Error);
            await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");
            StateHasChanged();
            return;
        }

        isStartRequestMoney = true;
        StateHasChanged();

        if (_requestMoneyModule._model.Money <= 0)
        {
            RequestMoneyError = new ValidationMessageBlock("Введено неверное количество.", "error");
            _requestMoneyModule.SetFieldStatus("Money", ValidationStatus.Error);
            isStartRequestMoney = false;
            await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");
            StateHasChanged();
            return;
        }

        await _ticketServices.CreateTicket(new Ticket()
        {
            SystemName = "Заявка на пополнения баланса",
            Date = DateTimeAddon.NowDateTimeStrings(),
            SystemInformation = "Заявка на пополнения счёта от пользователя " + viewer.UserName + ", на сумму: " + _requestMoneyModule._model.Money,
            TicketStatus = "status_waiting",
            TicketType = "type_fillingBalance",
            UserCreateId = viewer.Id,
            JsonObject = JsonConvert.SerializeObject(new FillBalanceTicketModel()
            {
                CountMoney = _requestMoneyModule._model.Money,
                ImagesIds = _requestMoneyModule._model.FillTicketImage.Select(m => m.ImageId).ToList(),
                TextInformation = _requestMoneyModule._model.Text
            })
        });

        // TODO: Изменить картинки, что бы не удалялиь через час

        //await RefDataInformationRequest.ClearMarkDown();

        isStartRequestMoney = false;
        RequestMoneyError = new ValidationMessageBlock("Заявка успешно подана.", "ok");

        _requestMoneyModule.SetFielAllStatus(ValidationStatus.None);

        _requestMoneyModule._model.FillTicketImage = ComponentUtils.MultiImageFormRecreate();
        _requestMoneyModule._model.Money = 0;
        _requestMoneyModule._model.Text = "";

        await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");

        StateHasChanged();
    }

    // transfer

    // TODO: Как только появятся настройки экономики ТМЛ добавить сюда нормальный процент а пока 5.3%

    private async Task StartTransfer()
    {
        if (transferLoader)
        {
            TransferMoneyError = new ValidationMessageBlock("Дождитесь окончания загрузки предидущего действия...", "error");
            _sendMoneyModule.SetFielAllStatus(ValidationStatus.None);
            await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");
            StateHasChanged();
            return;
        }

        transferLoader = true;
        StateHasChanged();

        if (_sendMoneyModule._model.Money <= 99 || _sendMoneyModule._model.Money > user.Balance)
        {
            TransferMoneyError = new ValidationMessageBlock("Недостаточно средств или введено неверное количество.", "error");
            _sendMoneyModule.SetFieldStatus("Money", ValidationStatus.Error);
            transferLoader = false;
            await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");
            StateHasChanged();
            return;
        }

        var userFind = await _userServices.FindUserByNickname(_sendMoneyModule._model.UserName);
        var userList = await _userServices.GetAllFilterClient(false, false);

        if (userFind == null || userFind.Id == user.Id || userList.Where(m => m.Id == userFind.Id).Count() <= 0)
        {
            _sendMoneyModule.SetFieldStatus("UserName", ValidationStatus.Error);
            TransferMoneyError = new ValidationMessageBlock("Пользователь для перевода не найден или пользователь не валиден.", "error");
            transferLoader = false;
            await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");
            StateHasChanged();
            return;
        }

        await _economicServices.CompleteTransferPay(user, userFind, _sendMoneyModule._model.SpendMoney, _sendMoneyModule._model.TransMoney);

        TransferMoneyError = new ValidationMessageBlock("Перевод прошёл успешно!", "ok");
        transferLoader = false;

        await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");

        _sendMoneyModule.SetFielAllStatus(ValidationStatus.None);
        StateHasChanged();
    }

    /*private async Task StartTransfer()
    {
        if (transferLoader)
        {
            TransferMoneyError = new ValidationMessageBlock("Дождитесь окончания загрузки предидущего действия...", "error");
            await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");
            StateHasChanged();
            return;
        }


        transferLoader = true;
        StateHasChanged();

        if (sendMoneyModel.Money <= 99 || SpendMoney > user.Balance)
        {
            addedClassTransfer = "is-invalid";
            TransferMoneyError = new ValidationMessageBlock("Недостаточно средств или введено неверное количество.", "error");
            transferLoader = false;
            await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");
            StateHasChanged();
            return;
        }

        var userFind = await _userServices.FindUserByNickname(sendMoneyModel.UserName);
        var userList = await _userServices.GetAllFilterClient(false, false);

        if (userFind == null || userFind.Id == user.Id || userList.Where(m => m.Id == userFind.Id).Count() <= 0)
        {
            _autoCompleteBlock.SetAutoCompleteStatus("is-invalid");
            TransferMoneyError = new ValidationMessageBlock("Пользователь для перевода не найден или пользователь не валиден.", "error");
            transferLoader = false;
            await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");
            StateHasChanged();
            return;
        }

        await _economicServices.CompleteTransferPay(user, userFind, SpendMoney, TransMoney);

        TransferMoneyError = new ValidationMessageBlock("Перевод прошёл успешно!", "ok");
        transferLoader = false;

        await _js.InvokeVoidAsync("ScrollHelper.ScrollToTop");

        _autoCompleteBlock.SetAutoCompleteStatus("");
        addedClassTransfer = "";
        StateHasChanged();
    }
    */

    protected override async Task OnInitializedAsync()
    {
        user = await _userServices.FindUserById(UserId);
        viewer = await _userServices.GetClient();
        var role = await _roleServices.GetRoleAsync(user.RoleId);

        if (user != null)
        {
            if (viewer == null || viewer.Id != user.Id)
            {
                await _virtualNavigationServices.ReRedirectClient(VirtualNavigationServices.errorUrl + "404", hardLoad: true);
                return;
            }

            var ActionId = _navigationManager.Uri.Split('#')[1];

            var item = ActionList.Where(m => m == ActionId).FirstOrDefault();

            if (item == null)
            {
                CurrentAction = ActionList.First();
                await ActionHub(CurrentAction);
            }
            else await ActionHub(ActionId);

            if (role.isBlockedEconomic)
                isEconomicBlocked = true;


            await ChangePageLoadStatus(true);
            StateHasChanged();

            await _js.InvokeVoidAsync("MaxHeightLoader");

            await _js.InvokeVoidAsync("loadScript", "libs/tippy.js/tippy.min.js");

            await _js.InvokeVoidAsync("CreateTippyElement",
        new List<TooltipModel>() {
                new TooltipModel(".-tp-transfer-money", "Перевод денег другому пользователю.", ToolTipStyles.DefaultStyle, width: 350),
                new TooltipModel(".-tp-request-money", "Подать заявку на пополнение баланса.", ToolTipStyles.DefaultStyle, width: 350)
                                                                                });
        }
        else await _virtualNavigationServices.ReRedirectClient(VirtualNavigationServices.accessDeniedUrl, hardLoad: true);
    }

    private async Task ActionHub(string action)
    {
        CurrentAction = ActionList.Last();
        StateHasChanged();

        // страничка сменилась на загрузку

        switch (action)
        {
            case "transferMoney":

                // Перевод денег

                var tax = await _systemConfiguration.Get("economic_transfer.tax");

                TransferMoneyInformation = new ValidationMessageBlock("Вы находитесь на странице перевода денег. В окне ниже начните вводить никнейм пользователя. Вам выдаст варианты пользователей. Нажмите на один из них. Перевод осуществляется по логину пользователя. Логин у каждого пользователя разный и используется при входе. Вам не обязательно искать пользователя, вы можете ввести его логин сразу, если вы его знаете. Информация по переводам:" +
    "<ul>" +
    "<li>Налоговая ставка за перевод: <bold>" + tax + "%</bold></li>" +
    "<li>Минимальная сумма для перевода: <bold>100</bold></li>" +
    "</ul>", "info");

                _sendMoneyModule = new ContextValidationModule<SendMoneyUserToUser>(new SendMoneyUserToUser());
                _sendMoneyModule._model.Tax = Convert.ToDouble(await _systemConfiguration.Get("economic_transfer.tax"));

                break;

            case "requestMoney":

                RequestMoneyInformation = new ValidationMessageBlock("Вы можете пополнить счёт вашего аккаунта. Если вы активно создаете контент в какой либо из стран или группе, за свое творчество и актив вы можете получить воознаграждение:" +
    "<ul>" +
    "<li>Страна\\группа\\организация в который вы создаете контент обязана входить в состав ММ как такогого.</li>" +
    "</ul>", "info");

                _requestMoneyModule = new ContextValidationModule<RequestMoneyModel>(new RequestMoneyModel());
                _requestMoneyModule._model.FillTicketImage = new List<FillTicketImage>()
                {
                    new FillTicketImage() { isUploadBlock = true }, new FillTicketImage(), new FillTicketImage(),
                    new FillTicketImage(), new FillTicketImage(), new FillTicketImage()
                };

                break;
        }

        CurrentAction = action; // Означает окончание загрузки
        await _js.InvokeVoidAsync("UrlHelper.SetHash", "/profile/" + UserId + "/actions", action); // set new hash
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager _navigationManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ITicketServices _ticketServices { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ISystemConfigurationServices _systemConfiguration { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IEconomicsServices _economicServices { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IRawTextHtmlizer _rawHtmlizer { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ITransactionServices _transactionServices { get; set; }
    }
}
#pragma warning restore 1591
